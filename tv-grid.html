<!doctype html>
<html lang="fr">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Tableau de garde — TV</title>
<style>
  :root{
    --bg:#0a0f16; --panel:#101824; --line:#233149;
    --text:#eaf1fb; --muted:#9fb2c9; --badge:#0f1520;
    --ticker-bg:#b00020; --ticker-fg:#ffffff;
  }
  html,body{margin:0;height:100%;background:var(--bg);color:var(--text);font-family:Inter,Segoe UI,Arial,sans-serif;overflow:hidden}

  /* Header */
  .header{display:flex;justify-content:space-between;align-items:center;padding:12px 18px;background:#0d1521;border-bottom:1px solid var(--line)}
  .title{font-size:28px;font-weight:800;color:#cfe1ff}
  .right{display:flex;gap:16px;align-items:center}
  .pill{background:#0f1520;border:1px solid #2c3d52;border-radius:999px;padding:6px 12px;color:#cfe1ff}

  /* Roles */
  .roles{display:flex;flex-wrap:wrap;gap:14px;padding:10px 18px}
  .roles .role{font-size:20px;font-weight:800;background:#0f1520;border:1px solid #2c3d52;border-radius:12px;padding:8px 12px;color:#cfe1ff}

  /* Legend */
  .legend{display:flex;gap:10px;align-items:center;padding:6px 18px 0 18px;color:var(--muted);font-size:14px}
  .chip{display:inline-flex;align-items:center;gap:8px;background:#0f1520;border:1px solid #2c3d52;border-radius:999px;padding:4px 10px}
  .dot{width:14px;height:14px;border-radius:50%}

  /* Content split */
  .content{display:grid;grid-template-columns:1fr 1fr;gap:16px;padding:12px 18px;height:calc(100vh - 56px - 62px - 90px);box-sizing:border-box;overflow:auto}
  .panel{background:var(--panel);border:1px solid var(--line);border-radius:14px;padding:14px;display:flex;flex-direction:column;gap:12px}
  .grid{display:grid;grid-template-columns:repeat(3,1fr);gap:12px}
  @media (max-width:1500px){ .grid{grid-template-columns:repeat(2,1fr)} }
  .slot{min-height:140px;display:flex;align-items:center;justify-content:center}

  /* Vehicle tile + status colors */
  .vtile{width:100%;border-radius:14px;box-shadow:inset 0 0 0 2px rgba(0,0,0,.22),0 8px 16px rgba(0,0,0,.5);padding:10px 12px;text-align:center;line-height:1.3}
  .vtile .line1{font-weight:800;font-size:16px;letter-spacing:.2px}
  .vtile .line2{margin-top:4px;font-size:14px;opacity:.95}
  .vtile .line3{margin-top:3px;font-size:13px;opacity:.9}

  .st-empty{background:#d3d3d3;color:#000;border:2px solid #c6c6c6}
  .st-dispo{background:#00a032;color:#fff}
  .st-indispo{background:#c00000;color:#fff}
  @keyframes blinkDepart{0%,49%{background:#005DFF}50%,100%{background:#003EAD}}
  .st-depart{animation:blinkDepart 1.2s linear infinite;color:#fff}
  .st-surplace{background:#ffd500;color:#000}
  .st-encharge{background:#ff75a0;color:#000}
  .st-hopital{background:#ff7f00;color:#000}

  /* Ticker */
  .ticker{height:56px;background:var(--ticker-bg);color:var(--ticker-fg);display:flex;align-items:center;overflow:hidden;border-top:1px solid #7a0016}
  .marquee{white-space:nowrap;display:flex;gap:96px;width:100%}
  .scroll{display:flex;gap:96px;will-change:transform;animation:scroll 40s linear infinite}
  @keyframes scroll{from{transform:translateX(0)} to{transform:translateX(-50%)}}
  .sepchar{display:inline-block;padding:0 36px;color:#ffdede;opacity:.9}
</style>
</head>
<body>

<div class="header">
  <div class="title">Tableau de garde</div>
  <div class="right">
    <div class="pill" id="dateTxt">—</div>
    <div class="pill" id="meteo">—</div>
    <div class="pill" id="clock">—:—</div>
  </div>
</div>

<div id="roles" class="roles"></div>

<!-- Légende des statuts -->
<div class="legend">
  <span>Codes couleurs :</span>
  <span class="chip"><span class="dot" style="background:#00a032"></span>Disponible</span>
  <span class="chip"><span class="dot" style="background:#005DFF"></span>Départ</span>
  <span class="chip"><span class="dot" style="background:#ffd500"></span>Sur place</span>
  <span class="chip"><span class="dot" style="background:#ff75a0"></span>En charge</span>
  <span class="chip"><span class="dot" style="background:#ff7f00"></span>À l'hôpital</span>
  <span class="chip"><span class="dot" style="background:#c00000"></span>Indisponible</span>
</div>

<div class="content">
  <!-- Hall (gauche): Ext + H1..H10 (sans libellés) -->
  <div class="panel">
    <div class="grid" id="hallGrid">
      <div class="slot" id="slot-Ext"></div>
      <div class="slot" id="slot-H1"></div>
      <div class="slot" id="slot-H2"></div>
      <div class="slot" id="slot-H3"></div>
      <div class="slot" id="slot-H4"></div>
      <div class="slot" id="slot-H5"></div>
      <div class="slot" id="slot-H6"></div>
      <div class="slot" id="slot-H7"></div>
      <div class="slot" id="slot-H8"></div>
      <div class="slot" id="slot-H9"></div>
      <div class="slot" id="slot-H10"></div>
    </div>
  </div>

  <!-- Garage (droite) en “optique hall” uniforme -->
  <div class="panel">
    <div class="grid" id="garageGrid">
      <div class="slot" id="slot-G1"></div>
      <div class="slot" id="slot-G2"></div>
      <div class="slot" id="slot-G3"></div>
      <div class="slot" id="slot-G4"></div>
      <div class="slot" id="slot-G5"></div>
      <div class="slot" id="slot-G6"></div>
      <div class="slot" id="slot-G7"></div>
      <div class="slot" id="slot-G8"></div>
    </div>
  </div>
</div>

<!-- Ticker -->
<div class="ticker">
  <div class="marquee">
    <div id="band1" class="scroll"></div>
    <div id="band2" class="scroll" aria-hidden="true"></div>
  </div>
</div>

<!-- Store bridge + TV JS -->
<script src="js/store-bridge.js"></script>
<script src="js/tv-grid.js"></script>
</body>
</html>
